#!/usr/bin/env bash

echo "Configuring bspwm..."

# wmname compiz

# xsetroot -cursor_name left_ptr
# setxkbmap -option caps:super

autorandr_current=$(autorandr --current)

if [[ $autorandr_current == "home_eDP1_left_of_DP1" ]]
then
  bspc monitor eDP1 -d 1 2
  bspc monitor DP1 -d 3 4 5 6 7 8 9 10
  bspc config window_gap 40
else
  bspc monitor eDP1 -d 1 2 3 4 5 6 7 8 9 10
  bspc config window_gap 10
fi

bspc config border_width         2
bspc config window_gap          10

bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true

bspc config ignore_ewmh_focus true

bspc config pointer_action1 move
bspc config pointer_action2 resize_side
bspc config pointer_action3 resize_corner

bspc config focus_follows_pointer true

if pgrep -x "sxhkd" > /dev/null
then
  pkill -USR1 -x sxhkd;
else
  sxhkd &
fi

$HOME/bin/launch_polybar

echo "bspwm configured!"
